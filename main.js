(()=>{"use strict";function e(e,t,r){e.forEach((function(e){return e.setCustomValidity("")})),function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.add(r.inactiveButtonClass),t.disabled=!0):(t.classList.remove(r.inactiveButtonClass),t.disabled=!1)}var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_visible"},r=document.querySelector("#popupProfile"),n=document.querySelector(".profile__user-name"),o=document.querySelector(".profile__user-description"),c=r.querySelector('input[name="profileName"]'),u=r.querySelector('input[name="profileInfo"]'),s=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],a=document.querySelector(".elements").querySelector(".elements__cards"),l=document.querySelector("#card").content,i=document.querySelector("#popupAddCards"),d=i.querySelector('input[name="cardName"]'),p=i.querySelector('input[name="cardLink"]'),m=document.querySelector("#imageLarge"),f=m.querySelector(".popup__image-text"),y=m.querySelector(".popup__image"),_=document.querySelector("#popupAddCards").querySelector(t.formSelector),v=_.querySelector(t.submitButtonSelector),S=_.querySelector("#cardName"),q=_.querySelector("#link");function k(e){document.addEventListener("keydown",L),e.classList.add("popup_opened")}function C(e){document.removeEventListener("keydown",L),e.classList.remove("popup_opened")}function L(e){"Escape"===e.key&&C(document.querySelector(".popup_opened"))}function E(e,t){var r=l.querySelector(".elements__card").cloneNode(!0),n=r.querySelector(".elements__image");return n.src=t,n.alt=e,n.addEventListener("click",b),r.querySelector(".elements__title").textContent=e,r.querySelector(".elements__trash-can").addEventListener("click",g),r.querySelector(".elements__love-button").addEventListener("click",h),r}function b(e){k(m);var t=e.target,r=t.closest(".elements__card").querySelector(".elements__title");y.src=t.src,y.alt=t.alt,f.textContent=r.textContent}function g(e){e.target.closest(".elements__card").remove()}function h(e){e.target.classList.toggle("elements__love-button_active")}function x(e,t){t.prepend(e)}document.querySelectorAll(".popup").forEach((function(e){return e.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&C(e)}))})),s.forEach((function(e){return E(e.name,e.link)})),document.querySelector(".profile__button-edit").addEventListener("click",(function(){c.value=n.textContent,u.value=o.textContent,k(popupProfile)})),popupProfile.querySelector(".popup__button-close").addEventListener("click",(function(){return C(popupProfile)})),popupProfile.addEventListener("submit",(function(e){e.preventDefault();var t=c,r=u;n.textContent=t.value,o.textContent=r.value,C(popupProfile)})),m.querySelector(".popup__button-close").addEventListener("click",(function(){return C(m)})),document.querySelector(".profile__button-add").addEventListener("click",(function(){k(popupAddCards)})),popupAddCards.querySelector(".popup__button-close").addEventListener("click",(function(){return C(popupAddCards)})),popupAddCards.addEventListener("submit",(function(r){r.preventDefault(),x(E(d.value,p.value),a),r.target.reset(),e([S,q],v,t),C(popupAddCards)})),s.forEach((function(e){return x(E(e.name,e.link),a)})),function(t){Array.from(document.querySelectorAll(t.formSelector)).forEach((function(r){return function(t,r){var n=Array.from(t.querySelectorAll(r.inputSelector)),o=t.querySelector(r.submitButtonSelector);e(n,o,r),n.forEach((function(c){c.addEventListener("input",(function(){!function(e,t,r){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorClass),n.textContent=""}(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.classList.add(n.errorClass),o.textContent=r}(e,t,t.validationMessage,r)}(t,c,r),e(n,o,r)}))}))}(r,t)}))}(t)})();